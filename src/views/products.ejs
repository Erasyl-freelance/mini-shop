<% if (success && success.length > 0) { %>
  <div class="alert success"><%= success[0] %></div>
<% } %>

<form action="/products" method="get" class="search-form">
  <input
    type="text"
    name="search"
    placeholder="ÃœrÃ¼n ara..."
    value="<%= search || '' %>"
  >
  <button type="submit">Ara</button>
</form>

<div class="sort-links">
  <a href="/products?sort=asc">â¬†ï¸ Fiyat Artan</a>
  <a href="/products?sort=desc">â¬‡ï¸ Fiyat Azalan</a>
</div>

<h2>ğŸ› ÃœrÃ¼nler</h2>

<% if (isAdmin) { %>
  <a href="/products/create" class="btn-primary">â• Yeni ÃœrÃ¼n Ekle</a>
<% } %>

<div class="grid">
  <% products.forEach(product => { %>
    <div class="card">

      <h3>
        <a href="/products/<%= product.id %>">
          <%= product.title %>
        </a>
      </h3>

      <p class="description">
        <%= product.description %>
      </p>

      <div class="price">
        $<%= product.price %>
      </div>

      <form action="/cart/add" method="POST">
        <input type="hidden" name="id" value="<%= product.id %>">
        <input type="hidden" name="title" value="<%= product.title %>">
        <input type="hidden" name="price" value="<%= product.price %>">

        <button type="submit">ğŸ›’ Sepete Ekle</button>
      </form>

      <% if (isAdmin) { %>
        <div class="actions">
          <a class="edit" href="/products/edit/<%= product.id %>">DÃ¼zenle</a>
          <a class="delete" href="/products/delete/<%= product.id %>">Sil</a>
        </div>
      <% } %>

    </div>
  <% }) %>
</div>

<!-- PAGINATION -->
<div class="pagination">
  <% for (let i = 1; i <= totalPages; i++) { %>
    <% if (i === currentPage) { %>
      <span class="active"><%= i %></span>
    <% } else { %>
      <a href="/products?page=<%= i %>"><%= i %></a>
    <% } %>
  <% } %>
</div>
